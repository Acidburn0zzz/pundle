/**
 * @source https://github.com/rburns/ansi-to-html/blob/master/src/ansi_to_html.coffee
 * @license MIT
 */
(function(){var t,r,o,n,e,u,c,i=[].slice;return r={ef0:"color:#000",ef1:"color:#A00",ef2:"color:#0A0",ef3:"color:#A50",ef4:"color:#00A",ef5:"color:#A0A",ef6:"color:#0AA",ef7:"color:#AAA",ef8:"color:#555",ef9:"color:#F55",ef10:"color:#5F5",ef11:"color:#FF5",ef12:"color:#55F",ef13:"color:#F5F",ef14:"color:#5FF",ef15:"color:#FFF",eb0:"background-color:#000",eb1:"background-color:#A00",eb2:"background-color:#0A0",eb3:"background-color:#A50",eb4:"background-color:#00A",eb5:"background-color:#A0A",eb6:"background-color:#0AA",eb7:"background-color:#AAA",eb8:"background-color:#555",eb9:"background-color:#F55",eb10:"background-color:#5F5",eb11:"background-color:#FF5",eb12:"background-color:#55F",eb13:"background-color:#F5F",eb14:"background-color:#5FF",eb15:"background-color:#FFF"},c=function(t){for(t=t.toString(16);t.length<2;)t="0"+t;return t},[0,1,2,3,4,5].forEach(function(t){return[0,1,2,3,4,5].forEach(function(o){return[0,1,2,3,4,5].forEach(function(n){var e,u,i,s,a,l;return u=16+36*t+6*o+n,a=t>0?40*t+55:0,i=o>0?40*o+55:0,e=n>0?40*n+55:0,l=function(){var t,r,o,n;for(o=[a,i,e],n=[],t=0,r=o.length;r>t;t++)s=o[t],n.push(c(s));return n}().join(""),r["ef"+u]="color:#"+l,r["eb"+u]="background-color:#"+l})})}),function(){for(u=[],e=0;23>=e;e++)u.push(e);return u}.apply(this).forEach(function(t){var o,n;return o=t+232,n=c(10*t+8),r["ef"+o]="color:#"+n+n+n,r["eb"+o]="background-color:#"+n+n+n}),n=function(){var t,r,o,n,e,u,c;for(t=arguments[0],u=2<=arguments.length?i.call(arguments,1):[],n=0,o=u.length;o>n;n++){e=u[n];for(r in e)c=e[r],t[r]=c}return t},o={fg:"#FFF",bg:"#000",newline:!0},t=function(){function t(t){null==t&&(t={}),this.opts=n({},o,t),this.input=[],this.stack=[],this.stickyStack=[]}return t.prototype.toHtml=function(t){var r;return this.input="string"==typeof t?[t]:t,r=[],this.stickyStack.forEach(function(t){return function(o){return t.generateOutput(o.token,o.data,function(t){return r.push(t)})}}(this)),this.forEach(function(t){return r.push(t)}),this.input=[],r.join("")},t.prototype.forEach=function(t){var r;return r="",this.input.forEach(function(o){return function(n){return r+=n,o.tokenize(r,function(r,n){return o.generateOutput(r,n,t)})}}(this)),this.stack.length?t(this.resetStyles()):void 0},t.prototype.generateOutput=function(t,r,o){switch(t){case"text":return o(r);case"display":return this.handleDisplay(r,o);case"xterm256":return o(this.pushStyle("ef"+r))}},t.prototype.updateStickyStack=function(t,r){var o;return o=function(t){return function(r){return(null===t||r.category!==t)&&"all"!==t}},"text"!==t?(this.stickyStack=this.stickyStack.filter(o(this.categoryForCode(r))),this.stickyStack.push({token:t,data:r,category:this.categoryForCode(r)})):void 0},t.prototype.handleDisplay=function(t,r){return t=parseInt(t,10),-1===t&&r("<br/>"),0===t&&this.stack.length&&r(this.resetStyles()),1===t&&r(this.pushTag("b")),3===t&&r(this.pushTag("i")),4===t&&r(this.pushTag("u")),t>4&&7>t&&r(this.pushTag("blink")),8===t&&r(this.pushStyle("display:none")),9===t&&r(this.pushTag("strike")),22===t&&r(this.closeTag("b")),23===t&&r(this.closeTag("i")),24===t&&r(this.closeTag("u")),t>29&&38>t&&r(this.pushStyle("ef"+(t-30))),39===t&&r(this.pushStyle("color:"+this.opts.fg)),t>39&&48>t&&r(this.pushStyle("eb"+(t-40))),49===t&&r(this.pushStyle("background-color:"+this.opts.bg)),t>89&&98>t&&r(this.pushStyle("ef"+(8+(t-90)))),t>99&&108>t?r(this.pushStyle("eb"+(8+(t-100)))):void 0},t.prototype.categoryForCode=function(t){return t=parseInt(t,10),0===t?"all":1===t?"bold":t>2&&5>t?"underline":t>4&&7>t?"blink":8===t?"hide":9===t?"strike":t>29&&38>t||39===t||t>89&&98>t?"foreground-color":t>39&&48>t||49===t||t>99&&108>t?"background-color":null},t.prototype.pushTag=function(t,o){return null==o&&(o=""),o.length&&-1===o.indexOf(":")&&(o=r[o]),this.stack.push(t),"<"+t+(o?' style="'+o+'"':void 0)+">"},t.prototype.pushStyle=function(t){return this.pushTag("span",t)},t.prototype.closeTag=function(t){var r;return this.stack.slice(-1)[0]===t&&(r=this.stack.pop()),null!=r?"</"+t+">":void 0},t.prototype.resetStyles=function(){var t,r;return t=[this.stack,[]],r=t[0],this.stack=t[1],r.reverse().map(function(t){return"</"+t+">"}).join("")},t.prototype.tokenize=function(t,r){var o,n,e,u,c,i,s,a,l,h,f,p,b,g,k;for(n=!1,o=3,p=function(t){return""},b=function(t,o){return r("xterm256",o),""},a=function(t){return function(o){return t.opts.newline?r("display",-1):r("text",o),""}}(this),e=function(t,o){var e,u,c;for(n=!0,0===o.trim().length&&(o="0"),o=o.trimRight(";").split(";"),c=0,u=o.length;u>c;c++)e=o[c],r("display",e);return""},f=function(t){return r("text",t),""},k=[{pattern:/^\x08+/,sub:p},{pattern:/^\x1b\[[012]?K/,sub:p},{pattern:/^\x1b\[38;5;(\d+)m/,sub:b},{pattern:/^\n/,sub:a},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:e},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:p},{pattern:/^([^\x1b\x08\n]+)/,sub:f}],h=function(r,e){var u;e>o&&n||(n=!1,u=t.match(r.pattern),t=t.replace(r.pattern,r.sub))},g=[];(s=t.length)>0;){for(c=l=0,i=k.length;i>l;c=++l)u=k[c],h(u,c);if(t.length===s)break;g.push(void 0)}return g},t}()}())
